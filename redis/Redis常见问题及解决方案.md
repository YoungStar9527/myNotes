# 1 高并发场景下的缓存+数据库双写不一致问题分析与解决方案

PS:以下问题及解决方案都是基于Cacae Aside Pattern模式

## 1.1 初级的缓存不一致问题及解决方案

​	**问题：**先修改数据库，再删除缓存，如果删除缓存失败了，那么会导致数据库中是新数据，缓存中是旧数据，数据出现不一致

​	**解决思路：**先删除缓存，再修改数据库，如果删除缓存成功了，修改数据库失败了，那么数据库是旧数据，缓存中是空的，那么数据不会不一致，因为都读的时候缓存没有，则数据库中的旧数据更新到缓存中

## 1.2 比较复杂的数据不一致问题分析

### 1.2.1 并发场景下的缓存不一致问题

**问题：**

数据发生了变更，先删除缓存，然后去修改数据库，此时还没修改

这个时候一个读请求过滤，发现缓存空了，去查询数据库，查到了修改前的旧数据，放到了缓存中

数据变更的程序完成了数据库的修改

此时又出现数据库和缓存中数据不一样了

解决方案：